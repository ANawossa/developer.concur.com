---
title: Identity v4
layout: reference
---

* [Overview](#overview)
* [Products and Editions](#products-editions)
* [Scope Usage](#scope-usage)
* [Dependencies](#dependencies)
* [Access Token Usage](#access-token-usage)
* [Retrieve User Filter](#GET-filter)
* [Retrieve Identity Profile](#GET-identity)
* [Schema](#schema)
  * [Payments](#schema-payments)
  * [Errors](#schema-errors)
* [Definitions](#definitions)
  * [Payment Update Status](#schema-payment-update-status)

## <a name="overview"></a>Overview

The Identity v4 service is designed to create, update, and read user’s core identity profile. This service is also available to look up the SAP Concur UUID to access any v4 API for a single user only.

> **Limitations**: This API is not available in the China Data Center. This API is only available to partners who have been granted access by SAP Concur. Access to this documentation does not provide access to the API.

## <a name="products-editions"></a>Products and Editions

* Concur Expense Professional Edition
* Concur Expense Standard Edition
* Concur Travel Professional Edition
* Concur Travel Standard Edition
* Concur Invoice Professional Edition
* Concur Invoice Standard Edition
* Concur Request Professional Edition
* Concur Request Standard Edition

## <a name="scope-usage"></a>Scope Usage

Name|Description|Endpoint
---|---|---
`identity.user.ids.read`|Read user ID data.|GET
`identity.user.core.read`|Read user core data.|GET
`identity.user.coresensitive.read`|Read core sensitive data.|GET
`identity.user.enterprise.read`|Read user enterprise data.|GET

## <a name="dependencies"></a>Dependencies

None.

## <a name="access-token-usage"></a>Access Token Usage

This API supports only company level access tokens.

## <a name="obtain-payment"></a>Retrieve User Filter

Filters for a unique user.

### Request

#### URI

##### Template

```
GET https://us.api.concursolutions.com/profile/identity/v4/Users?filter=externalId
```

##### Parameters

Name|Type|Format|Description
---|---|---|---
`userID`|`string`|-|Requested user's username.
`companyId`|`string`|-|**Required, if `employeeNumber` is used** The ID of the company the user belongs to.
`employeeNumber`|`string`|-|**Required, if `companyId` is used** User's employee number.
`externalId`|`string`|-|User’s external ID.

#### Headers

* [RFC 7231 Content-Type](https://tools.ietf.org/html/rfc7231#section-3.1.1.5)
* [RFC 7235 Authorization](https://tools.ietf.org/html/rfc7235#section-4.2)

#### Payload

None.

### Response

#### Status Codes

* [200 OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)
* [400 Bad Request](https://tools.ietf.org/html/rfc7231#section-6.5.1)
* [401 Unauthorized](https://tools.ietf.org/html/rfc7235#section-3.1)
* [404 Not Found](https://tools.ietf.org/html/rfc7231#section-6.5.4)
* [500 Internal Server Error](https://tools.ietf.org/html/rfc7231#section-6.6.1)
* [501 Not Implemented](https://tools.ietf.org/html/rfc7231#section-6.6.2)
* [502 Bad Gateway](https://tools.ietf.org/html/rfc7231#section-6.6.3)
* [503 Service Unavailable](https://tools.ietf.org/html/rfc7231#section-6.6.4)
* [504 Gateway Timeout](https://tools.ietf.org/html/rfc7231#section-6.6.5)

#### Headers

* `concur-correlationid` is a SAP Concur specific custom header used for technical support in the form of a [RFC 4122 A Universally Unique IDentifier (UUID) URN Namespace](https://tools.ietf.org/html/rfc4122)
* [RFC 7231 Content-Type](https://tools.ietf.org/html/rfc7231#section-3.1.1.5)
* [RFC 7235 Authorization](https://tools.ietf.org/html/rfc7235#section-4.2)

#### Payload

[-](#-)

### Example

#### Request

```
GET https://us.api.concursolutions.com/profile/identity/v4/users/
Accept: application/json
Authorization: BEARER {token}
```

#### Response

```
200 OK
Content-Type: application/json
```

```json
{
  "active": true,
  "addresses": [
    {
      "country": "string",
      "locality": "string",
      "postalCode": "string",
      "region": "string",
      "streetAddress": "string"
    }
  ],
  "companyDomain": "string",
  "contact": {
    "country": "string",
    "emails": [
      "string"
    ],
    "locality": "string",
    "name": "string",
    "phones": [
      "string"
    ],
    "postalCode": "string",
    "region": "string",
    "streetAddress": "string"
  },
  "defaultLanguage": "string",
  "entitlements": [
    "Expense"
  ],
  "id": "string",
  "internetDomain": "string",
  "meta": {},
  "name": "string",
  "schemas": [
    "string"
  ],
  "urn:ietf:params:scim:schemas:extension:authentication:2.0:Company": {
    "loginPolicy": {
      "hideForgotLoginIdLink": true,
      "loginFailureLockoutDuration": 0,
      "loginFailureWindowDuration": 0,
      "loginFailuresAllowed": 0,
      "loginIPRestriction": "string",
      "loginOneTimeLinkExpirationLength": 0,
      "loginViaSsoOnly": true
    },
    "passwordPolicy": {
      "daysUntilExpiration": 0,
      "expirePasswordOnUserCreation": true,
      "maxLength": 0,
      "minLength": 0,
      "mobileAuthenticationLifetime": 0,
      "mobileMinLength": 0,
      "mobileRequiresMixedCase": true,
      "mobileRequiresNonalphanum": true,
      "numGenerationsBeforeCanReuse": 0,
      "numSecurityQuestions": 0,
      "numSecurityQuestionsUsersPick": 0,
      "passwordResetEmailPolicy": "never",
      "passwordResetSupportEmail": "string",
      "requiresMixedCase": true,
      "requiresNonAlpha": true,
      "requiresNonAlphanum": true,
      "requiresNumber": true,
      "requiresSecurityQuestions": true,
      "restrictPasswordResetOncePerDay": true
    }
  },
  "urn:ietf:params:scim:schemas:extension:notification:2.0:Company": {
    "channels": [
      "Slack"
    ],
    "enabled": true
  },
  "urn:ietf:params:scim:schemas:extension:sap:2.0:Company": {
    "crmCustomerId": "string"
  }
}
```

## <a name="obtain-payment"></a>Retrieve Identity Profile

Retrieves a user's core identity profile.

### Request

#### URI

##### Template

```
GET https://us.api.concursolutions.com/profile/identity/v4/Users/
```
##### Parameters

Name|Type|Format|Description
---|---|---|---
`userID`|`string`|-|Requested user's username.
`companyId`|`string`|-|**Required, if `employeeNumber` is used** The ID of the company the user belongs to.
`employeeNumber`|`string`|-|**Required, if `companyId` is used** User's employee number.
`externalId`|`string`|-|User’s external ID.

#### Headers

* [RFC 7231 Content-Type](https://tools.ietf.org/html/rfc7231#section-3.1.1.5)
* [RFC 7235 Authorization](https://tools.ietf.org/html/rfc7235#section-4.2)

#### Payload

None.

### Response

#### Status Codes

* [200 OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)
* [400 Bad Request](https://tools.ietf.org/html/rfc7231#section-6.5.1)
* [401 Unauthorized](https://tools.ietf.org/html/rfc7235#section-3.1)
* [404 Not Found](https://tools.ietf.org/html/rfc7231#section-6.5.4)
* [500 Internal Server Error](https://tools.ietf.org/html/rfc7231#section-6.6.1)
* [501 Not Implemented](https://tools.ietf.org/html/rfc7231#section-6.6.2)
* [502 Bad Gateway](https://tools.ietf.org/html/rfc7231#section-6.6.3)
* [503 Service Unavailable](https://tools.ietf.org/html/rfc7231#section-6.6.4)
* [504 Gateway Timeout](https://tools.ietf.org/html/rfc7231#section-6.6.5)

#### Headers

* `concur-correlationid` is a SAP Concur specific custom header used for technical support in the form of a [RFC 4122 A Universally Unique IDentifier (UUID) URN Namespace](https://tools.ietf.org/html/rfc4122)
* [RFC 7231 Content-Type](https://tools.ietf.org/html/rfc7231#section-3.1.1.5)
* [RFC 7235 Authorization](https://tools.ietf.org/html/rfc7235#section-4.2)

#### Payload

[-](#-)

### Example

#### Request

```
GET https://us.api.concursolutions.com/profile/identity/v4/users/
Accept: application/json
Authorization: BEARER {token}
```

#### Response

```
200 OK
Content-Type: application/json
```

```json
{
  "active": true,
  "addresses": [
    {
      "country": "string",
      "locality": "string",
      "postalCode": "string",
      "region": "string",
      "streetAddress": "string",
      "type": "work"
    }
  ],
  "dateOfBirth": "string",
  "displayName": "string",
  "emails": [
    {
      "dateAdded": "string",
      "dateVerified": "string",
      "notifications": true,
      "type": "work",
      "value": "string",
      "verified": true
    }
  ],
  "emergencyContacts": [
    {
      "country": "string",
      "emails": [
        "string"
      ],
      "locality": "string",
      "name": "string",
      "phones": [
        "string"
      ],
      "postalCode": "string",
      "region": "string",
      "relationship": "Spouse",
      "streetAddress": "string"
    }
  ],
  "entitlements": [
    "Expense"
  ],
  "externalId": "string",
  "gender": "Male",
  "id": "string",
  "localeOverrides": {
    "preference24Hour": "h:mm AM/PM",
    "preferenceCurrencySymbolLocation": "BeforeAmount",
    "preferenceDateFormat": "mm/dd/yyyy",
    "preferenceDefaultCalView": "day",
    "preferenceDistance": "mile",
    "preferenceEndDayViewHour": 0,
    "preferenceFirstDayOfWeek": "Monday",
    "preferenceHourMinuteSeparator": ":",
    "preferenceNegativeCurrencyFormat": "-100",
    "preferenceNegativeNumberFormat": "-100",
    "preferenceNumberFormat": "1,000.00",
    "preferenceStartDayViewHour": 0
  },
  "meta": {},
  "name": {
    "familyName": "string",
    "formatted": "string",
    "givenName": "string",
    "hasNoMiddleName": true,
    "honorificPrefix": "Miss",
    "honorificSuffix": "Jr.",
    "legalName": "string",
    "middleInitial": "string",
    "middleName": "string"
  },
  "nickName": "string",
  "phoneNumbers": [
    {
      "display": "string",
      "notifications": true,
      "operatingSystem": "Android Phone",
      "primary": true,
      "type": "work",
      "value": "string"
    }
  ],
  "preferredLanguage": "string",
  "schemas": [
    "urn:ietf:params:scim:schemas:core:2.0:User"
  ],
  "timezone": "string",
  "title": "string",
  "urn:ietf:params:scim:schemas:extension:enterprise:2.0:User": {
    "companyId": "string",
    "costCenter": "string",
    "department": "string",
    "division": "string",
    "employeeNumber": "string",
    "manager": {
      "$ref": "string",
      "displayName": "string",
      "employeeNumber": "string",
      "value": "string"
    },
    "orgUnit": "string",
    "organization": "string",
    "self": {
      "$ref": "string",
      "displayName": "string",
      "employeeNumber": "string",
      "value": "string"
    },
    "startDate": "string",
    "terminationDate": "string"
  },
  "userName": "string
  },
]
```

## <a name="schema"></a>Schema

### <a name="schema-payments"></a>Payments

Name | Type | Format | Description
-----|------|--------|------------
`payments`|`array`|[Payment](#schema-payment)|Array of payments.

### <a name="schema-payment"></a>Payment

Name | Type | Format | Description
-----|------|--------|------------
`invoices`|`array`|[Invoice](#schema-invoice)|Array of invoices that need to be batched in a payment.
`paymentDueDate`|`string`|YYYY-MM-DD|The date by which the payment should be made.
`paymentID`|`string`|-|Unique identifier of the payment in SAP Concur. Maximum 36 characters.
`paymentMethod`|`string`|-|The value is always `PAYPVD` which means that the client wants to pay using a payment provider. Maximum 15 characters.
`totalAmount`|`object`|[Amount](#schema-amount)|This amount needs to be paid to the vendor.
`vendor`|`object`|[Vendor](#schema-vendor)|Vendor requesting the payment.
